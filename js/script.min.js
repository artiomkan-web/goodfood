"use strict";window.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector(".header"),t=e.querySelector(".header__catalog"),s=e.querySelector(".header__catalog__btn"),c=e.querySelector(".header__catalog__menu"),a=e.querySelectorAll(".header__catalog__category>span"),i=e.querySelectorAll(".header__catalog__subcategory>span"),r=e.querySelector(".header__head"),o=e.querySelector(".header__body"),l=o.offsetTop,n=e.querySelector(".header__connect__account"),d=e.querySelector(".header__burger");function u(e){e.parentNode.classList.contains("header__catalog__category")&&(e.parentNode.classList.contains("active")?(c.classList.remove("choice-category"),e.parentNode.classList.remove("active")):(c.classList.add("choice-category"),e.parentNode.classList.add("active"))),e.parentNode.classList.contains("header__catalog__subcategory")&&(e.parentNode.classList.contains("active")?(c.classList.remove("choice-subcategory"),e.parentNode.classList.remove("active")):(c.classList.add("choice-subcategory"),e.parentNode.classList.add("active")))}function _(){t.querySelectorAll("li").forEach(e=>{e.classList.remove("active")}),t.classList.remove("active"),c.classList.remove("choice-category"),c.classList.remove("choice-subcategory")}a.forEach(e=>{e.addEventListener("click",e=>{u(e.target)})}),i.forEach(e=>{e.addEventListener("click",e=>{u(e.target)})});let v=document.querySelector(".startpage"),m=v.querySelector(".startpage__maincontent__row"),h=v.querySelector(".startpage__allcontent"),y=v.querySelector(".startpage__allcontent__row"),L=v.querySelectorAll(".startpage__allcontent__item"),p=getComputedStyle(h).getPropertyValue("--show"),g=L.length,f=document.querySelector(".startpage__toggle-btn.prev"),S=document.querySelector(".startpage__toggle-btn.next"),q=0;function E(){q>g-1&&(q=0,y.style.left=0),q<0&&(q=g-1),m.style.left=-100*q+"%",q>=p-1&&(y.style.left=-100/p*(q-p+1)+"%")}f.addEventListener("click",()=>{E(q--)}),S.addEventListener("click",()=>{E(q++)});class w{constructor(e,t=0){this.slider=e,this.row=e.querySelector(".row"),this.items=e.querySelectorAll(".item"),this.indents=1*getComputedStyle(e).getPropertyValue("--indents").split("px")[0],this.show=getComputedStyle(e).getPropertyValue("--show"),this.all=this.items.length,this.prev=e.querySelector(".toggle-btn.prev"),this.next=e.querySelector(".toggle-btn.next"),this.index=t,this.prev.addEventListener("click",()=>{this.sliderToggle(this.index--)}),this.next.addEventListener("click",()=>{this.sliderToggle(this.index++)})}sliderToggle(){this.index<0&&(this.index=this.all-1),this.index>=this.all-this.show+1&&(this.index=0),this.index>this.all-1&&(this.index=0),"100%"!=getComputedStyle(this.items[0]).getPropertyValue("min-width")?this.row.style.left=-this.index*this.items[0].offsetWidth-this.indents*this.index+"px":this.row.style.left=100*-this.index+"%"}}new w(document.querySelector(".discounts__slider")),new w(document.querySelector(".prices__body")),new w(document.querySelector(".new__content "));let b=document.querySelector(".prices"),x=b.querySelectorAll(".prices__item"),k=b.querySelectorAll(".prices__product__availability"),A=b.querySelectorAll(".prices__properties__favorite"),N=b.querySelectorAll(".prices__add");function T(e){e.classList.contains("active")?e.classList.remove("active"):e.classList.add("active")}function C(e,t){e.forEach(e=>e.classList.remove("active"));for(let s=0;s<t+1;s++)e[s].classList.add("active")}x.forEach(e=>{e.classList.contains("outstock")&&k.forEach(e=>{e.textContent="Нет в наличии"})}),A.forEach(e=>{e.addEventListener("click",()=>{T(e)})}),N.forEach(e=>{e.addEventListener("click",()=>{T(e)})}),x.forEach(e=>{let t=e.querySelector(".prices__properties__rating"),s=e.querySelectorAll(".prices__properties__rating-star"),c=0;for(let e=0;e<s.length;e++)s[e].classList.contains("active")&&c++;t.addEventListener("mouseover",e=>{for(let t=0;t<s.length;t++)e.target==s[t]&&C(s,t)}),t.addEventListener("mouseleave",e=>{s.forEach(e=>e.classList.remove("active"));for(let e=0;e<c;e++)s[e].classList.add("active")})});let z=document.querySelector(".account"),W=document.querySelector(".header__connect__account"),Y=document.querySelectorAll(".account__close"),M=document.querySelector(".account__tabs"),P=document.querySelectorAll(".account__tabs-btn"),Q=document.querySelectorAll(".account__tabs-item"),R=document.querySelectorAll(".account__error"),V=document.querySelector(".account__item.login"),Z=document.querySelector(".account__item.confirm"),$=document.querySelector(".account__tabs-item.log-in"),j=!0,B=$.querySelector(".account__btn.submit"),O=$.querySelector(".account__field.login>input"),D=$.querySelector(".account__field.password>input"),H=[{login:"mail@mail.ru",password:"QWERTY123"},{login:"mail2@mail.ru",password:"QWERTY1234"},{login:"mail3@mail.ru",password:"QWERTY12345"},{login:"mail4@mail.ru",password:"QWERTY123456"}],F=document.querySelector(".account__tabs-item.sign-up"),G=!0,I=F.querySelector(".account__btn.submit"),J=F.querySelectorAll(".account__field.text>input"),K=F.querySelector(".account__field.phone>input"),U=F.querySelector(".account__field.email>input"),X=F.querySelector(".account__field.password>input"),ee=F.querySelector(".account__field.confirm-password>input"),te=F.querySelector(".account__field.code>input"),se=F.querySelector(".account__checkbox>input"),ce=123456,ae=Z.querySelector(".account__field.sms>input"),ie=Z.querySelector(".account__btn.submit");function re(e,t=0){e?R[t].classList.remove("active"):R[t].classList.add("active")}function oe(){let e;return X.value===ee.value?(e=!0,ee.parentNode.classList.remove("error")):e=!1,e}function le(){z.classList.contains("active")?(z.classList.remove("active"),document.body.style.overflow="",document.body.style.position=""):(z.classList.add("active"),document.body.style.overflow="hidden",document.body.style.position="fixed")}function ne(){if(window.matchMedia("(min-width: 769px)").matches&&(window.addEventListener("scroll",()=>{window.pageYOffset>l?(o.classList.add("fixed"),r.style.marginBottom=o.offsetHeight+"px"):(o.classList.remove("fixed"),r.style.marginBottom="")}),s.addEventListener("mouseover",()=>{t.classList.add("active")}),t.addEventListener("mouseleave",_),c.addEventListener("mouseleave",_)),window.matchMedia("(max-width: 768px)").matches){r.insertAdjacentElement("beforeend",t),o.querySelector(".container").insertAdjacentElement("beforeend",n),d.addEventListener("click",()=>{e.classList.contains("active")?(e.classList.remove("active"),document.body.style.overflow=""):(e.classList.add("active"),document.body.style.overflow="hidden")}),t.classList.add("active"),c.addEventListener("mouseleave",()=>{}),t.addEventListener("mouseleave",()=>{}),s.addEventListener("click",()=>{t.classList.contains("active")?_():t.classList.add("active")});let i=e.querySelector(".header__search"),l=i.querySelector(".header__search__icon"),u=i.querySelector(".header__search__window__close");function a(){i.classList.contains("active")?(i.classList.remove("active"),document.body.classList.remove("fixed")):(i.classList.add("active"),document.body.classList.add("fixed"))}l.addEventListener("click",a),u.addEventListener("click",a),window.addEventListener("click",t=>{t.target.classList.value.includes("header")||t.target.parentNode.classList.value.includes("header")||(e.classList.remove("active"),document.body.style.overflow=""),t.target.classList.value.includes("header-mobile")&&(e.classList.remove("active"),document.body.style.overflow="")})}window.matchMedia("(max-width: 576px)").matches}B.addEventListener("click",e=>{let t=H.filter(e=>e.login===O.value&&e.password===D.value);j=1==t.length,re(j)}),I.addEventListener("click",e=>(G=!0,J.forEach(e=>{if(!/^[а-яё]*$/i.test(e.value))return G=!1}),K.value.length<16&&(G=!1),/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(U.value)||(G=!1),/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,20}$/.test(X.value)||(G=!1),X.value!==ee.value&&(G=!1),te.value!=ce&&(G=!1),se.checked||(G=!1),G&&(V.classList.remove("active"),Z.classList.add("active")),re(G))),X.addEventListener("input",(function(){if(!/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,20}$/.test(X.value))return X.parentNode.classList.add("error"),!1;X.parentNode.classList.remove("error")})),ee.addEventListener("input",()=>{oe()?ee.parentNode.classList.remove("error"):ee.parentNode.classList.add("error")}),X.addEventListener("input",oe),ae.addEventListener("input",()=>{ae.value.length==123123..toString().length&&(123123==ae.value?(re(!0,1),ie.classList.remove("disabled")):(re(!1,1),ie.classList.add("disabled")))}),W.addEventListener("click",()=>{le()}),Y.forEach(e=>{e.addEventListener("click",()=>{le()})}),z.addEventListener("click",e=>{e.target.classList.contains("modal")&&le()}),M.addEventListener("click",e=>{for(let t=0;t<P.length+1;t++)e.target==P[t]&&(P.forEach(e=>e.classList.remove("active")),Q.forEach(e=>e.classList.remove("active")),P[t].classList.add("active"),Q[t].classList.add("active"))}),ne(),window.addEventListener("resize",ne)});